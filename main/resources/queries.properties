##create scripts for sniffer queries##
##algernon moncrief##

table_sniffer = SELECT table_name FROM INFORMATION_SCHEMA.tables WHERE table_name NOT LIKE 'zform%';

column_sniffer = select column_name, CASE WHEN data_type = 'varbinary' THEN 'varbinary (500)' WHEN data_type = 'bigint' THEN 'bigint(19)' WHEN data_type = 'char' THEN 'char('+cast(character_maximum_length AS varchar(25))+')' WHEN data_type = 'decimal' THEN 'decimal('+cast(NUMERIC_PRECISION AS varchar(25))+','+cast(NUMERIC_SCALE AS varchar(25))+')' WHEN data_type = 'float' THEN 'float(53)' WHEN data_type = 'int' THEN 'int(10)' WHEN data_type = 'smallint' THEN 'smallint(5)' WHEN data_type = 'tinyint' THEN 'tinyint(3)' WHEN data_type = 'varchar' AND character_maximum_length = -1 THEN 'varchar(500)' WHEN data_type = 'varchar' THEN 'varchar('+cast(character_maximum_length AS varchar(25))+')' WHEN data_type = 'xml' THEN 'TEXT' WHEN data_type = 'money' THEN 'DECIMAL(19,4)' WHEN data_type = 'bit' THEN 'TINYINT(1)' WHEN data_type = 'datetime2' THEN 'DATETIME' WHEN data_type = 'nchar' THEN 'LONGTEXT' WHEN data_type = 'image' THEN 'LONGBLOB' WHEN data_type = 'numeric' THEN 'decimal('+cast(NUMERIC_PRECISION AS varchar(25))+','+cast(NUMERIC_SCALE AS varchar(25))+')' WHEN data_type = 'nvarchar' THEN 'LONGTEXT' WHEN data_type = 'real' THEN 'FLOAT(24)' WHEN data_type = 'smalldatetime' THEN 'datetime' WHEN data_type = 'text' THEN 'longtext' WHEN data_type = 'uniqueidentifier' THEN 'varchar(64)' else data_type END as mapped_data_type  from INFORMATION_SCHEMA.COLUMNS WHERE table_name = @param1 ORDER BY ordinal_position ASC;

key_sniffer = SELECT Col.Column_Name from INFORMATION_SCHEMA.TABLE_CONSTRAINTS Tab, INFORMATION_SCHEMA.CONSTRAINT_COLUMN_USAGE Col WHERE Col.Constraint_Name = Tab.Constraint_Name AND Col.Table_Name = Tab.Table_Name AND Constraint_Type = 'PRIMARY KEY' And tab.table_name = @param1;
